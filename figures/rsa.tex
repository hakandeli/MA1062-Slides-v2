\tikzstyle{netnode} = [circle, 
					   minimum width = 0.25cm, 
					   minimum height = 0.25cm, 
					   text = black!100, 
					   align=center, 
					   line width = 1, 
					   inner sep = 0.5mm, 
					   shading=radial, 
					   inner color = sapphiremacchiato!50, 
					   outer color = sapphiremacchiato!100]

\tikzstyle{edge}=[> = stealth, line width = 0.3pt, shorten <= 0mm, shorten >= 0mm]


\newcommand{\slotheight}{1.2cm}
\newcommand{\slotwidth}{1mm}
\newcommand{\numchannels}{10}
\newcommand{\fsperchannel}{5}
\newcommand{\lw}{1pt}

\tikzstyle{slot} = [draw = black,
					minimum width = \slotwidth, 
				    minimum height = \slotheight, 
					text = black!100, 
					anchor = west, 
					line width = \lw,
					inner sep = 0mm]

    
\begin{tikzpicture}

    %background rectangles
    \node[rectangle, fill = IKRBlue!20, minimum width = 14cm, minimum height = 6.9cm, rounded corners = 5pt, anchor = north west, visible on = <2->] at (0,0) {};
    \node[rectangle, fill = white, minimum width = 6cm, minimum height = 3cm, rounded corners = 5pt, anchor = north west, visible on = <3->] at (0.5,-0.8) {};
    \node[rectangle, fill = white, minimum width = 6cm, minimum height = 3cm, rounded corners = 5pt, anchor = north west, visible on = <5->] at (7.5,-0.8) {};

    %plus
    \begin{scope}[shift={(7cm,-2.3cm)}, visible on = <5->]
          \def\arm{0.05}   % half-width of arms
          \def\len{0.2}     % half-length of plus arms
          % Draw filled plus shape centered at (0,0)
          \filldraw[IKRBlue]
          (-\arm, -\len) rectangle (\arm, \len)  % vertical bar
          (-\len, -\arm) rectangle (\len, \arm); % horizontal bar
    \end{scope}

    %text
    \node[anchor = west, visible on = <2->] at (0.2, -0.45) {\textbf{R}outing and \textbf{S}pectrum \textbf{A}ssignment Problem};
    \node[anchor = center, align = center, visible on = <3->] at (3.4, -4.15) {Route};
    \node[anchor = center, align = center, visible on = <5->] at (10.5, -4.15) {Spectrum};

    %layer42
    \begin{scope}[x=1.3cm, y=1.1cm, shift={(3.5cm, -2.6cm)}]
    
        %vanilla
        \node[netnode, visible on = <3->] (nA) at (-0.53, 1.29) {\small A};
        \node[netnode, visible on = <3>] (nB) at (-0.35, 0.21) {\small B};
        \node[netnode, visible on = <3->] (nC) at (-1.39, -0.16) {\small C};
        \node[netnode, visible on = <3->] (nD) at (0.26, -0.68) {\small D};
        \node[netnode, visible on = <3->] (nE) at (1.29, -0.76) {\small E};
        \node[netnode, visible on = <3>] (nF) at (0.72, 0.1) {\small F};
        
        \draw[edge, <->, visible on = <3>] (nA) -- (nB); 
        \draw[edge, <->, visible on = <3>] (nB) -- (nC);
        \draw[edge, <->, visible on = <3>] (nB) -- (nF);
        \draw[edge, <->, visible on = <3>] (nB) -- (nD);
        \draw[edge, <->, visible on = <3>] (nD) -- (nF);
        \draw[edge, <->, visible on = <3>] (nD) -- (nE);
        \draw[edge, <->, visible on = <3>] (nE) -- (nF);  
    
        %scenario
        \node[  netnode, 
                inner color = red!20, 
				outer color = red!70,
                visible on = <4->] (nBs) at (-0.35, 0.21) {\small B};

        \node[  netnode, 
                inner color = red!20, 
				outer color = red!70,
                visible on = <4->] (nFs) at (0.72, 0.1) {\small F};

        \draw[edge, <->, opacity = 0.3, visible on = <4->] (nA) -- (nB); 
        \draw[edge, <->, opacity = 0.3, visible on = <4->] (nB) -- (nC);
        \draw[edge, draw = ForestGreen, ->, visible on = <4->] (nB) -- (nF);
        \draw[edge, draw = Orchid, ->, visible on = <4->] (nB) -- (nD);
        \draw[edge, draw = Orchid, ->, visible on = <4->] (nD) -- (nF);
        \draw[edge, <->, opacity = 0.3, visible on = <4->] (nD) -- (nE);
        \draw[edge, <->, opacity = 0.3, visible on = <4->] (nE) -- (nF); 
        
    \end{scope}

    %spectrum

    \begin{scope}[shift={(8cm,-2.5cm)}]
    
        %EON
    	\pgfmathtruncatemacro{\amount}{\numchannels*\fsperchannel}
    	\foreach \i in {1,...,\amount}{
    		\pgfmathtruncatemacro{\j}{\i-1}
    		\node[slot, minimum width = \slotwidth, draw = black!20, line width = 0.5*\lw, visible on = <5->] (fs\i) at (\j*\slotwidth+0.125*\lw, 0) {};
    	}
    	
    	%draw eon channels by hand	
    	\foreach \ns/\nend in  {fs1/fs3,
    						    fs7/fs10,
    	                        fs23/fs28,
    	                        fs41/fs50}{
    
    	\fill[fill=red, opacity = 0.5, visible on = <5->] (\ns.north west)++(0.25*\lw,0) -- ($(\ns.south west)+(0.25*\lw, 0.5*\lw)$) -- ($(\nend.south east) + (-0.25*\lw, 0.5*\lw)$) -- ($(\nend.north east)+(-0.25*\lw,0)$) -- cycle;
    	                        
    	}
    
        \node[draw = black, 
              minimum width = 10*\slotwidth*\fsperchannel, 
    		   minimum height = \slotheight, 
    		   text = black!100, 
    		   anchor = west, 
    		   line width = \lw,
    		   inner sep = 0mm, visible on = <5->] (startboxeon) at (-0.005, 0) {};

        \draw[->, line width = 1pt, draw = red, > = Stealth , shorten >= 0.5mm, visible on = <6->] ($(fs13.north) + (0, 0.6)$) -- (fs13.north);
    
    \end{scope}


    % constraints
    \node[rectangle, fill = IKRBlue!5, minimum width = 4.4cm, minimum height = 2cm, rounded corners = 5pt, anchor = north west, align = center, text height = 1cm, text depth = 0.5cm, visible on = <7->] at (0.2,-4.7) {FS $\leftrightarrow$ optical channel};
    \node[rectangle, fill = IKRBlue!5, minimum width = 4.4cm, minimum height = 2cm, rounded corners = 5pt, anchor = north west, align = center, text height = 1cm, text depth = 0.5cm, visible on = <8->] at (4.8,-4.7) {no wavelength conversion};
    \node[rectangle, fill = IKRBlue!5, minimum width = 4.4cm, minimum height = 2cm, rounded corners = 5pt, anchor = north west, align = center, text height = 1cm, text depth = 0cm, visible on = <9->] at (9.4,-4.7) {assigned FSs are \\ adjacent};

    \node[anchor = center, align = center, visible on = <7->] at (2.4, -5.2) {\textbf{Capacity}};
    \node[anchor = center, align = center, visible on = <8->] at (7, -5.2) {\textbf{Continuity}};
    \node[anchor = center, align = center, visible on = <9->] at (11.6, -5.2) {\textbf{Contiguity}};
    
 
\end{tikzpicture}
					